<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Build Single Page Apps - Part 7 - MVVM and KnockoutJS</title>
    
    <meta name="author" content="John Papa">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

    <!-- Le styles -->
    <link href="/assets/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/resources/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="/assets/resources/syntax/syntax.css" rel="stylesheet">
    <link href="/assets/css/style.css" rel="stylesheet">

    <link rel="shortcut icon" type="image/x-icon" href="assets/ico/favicon.ico">

    <!-- Le fav and touch icons -->
    <!-- Update these with your own images
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
	-->

    <link rel="alternate" type="application/rss+xml" title="" href="/feed.xml">

</head>

<body>
    <nav class="navbar navbar-default visible-xs" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            
            <a type="button" class="navbar-toggle nav-link" href="http://github.com/johnpapa">
                <i class="fa fa-github"></i>
            </a>
            
            
            <a type="button" class="navbar-toggle nav-link" href="http://twitter.com/john_papa">
                <i class="fa fa-twitter"></i>
            </a>
            
            
            <a class="navbar-brand" href="/">
                <img src="http://www.gravatar.com/avatar/0d3794fe37746ea54926ca6878712721?s=35" class="img-circle" />
                
            </a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li class="active"><a href="/">Home</a></li>
                <li><a href="/categories.html">Categories</a></li>
                <li><a href="/tags.html">Tags</a></li>
            </ul>
        </div><!-- /.navbar-collapse -->
    </nav>

    <!-- nav-menu-dropdown -->
    <div class="btn-group hidden-xs" id="nav-menu">
        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
            <i class="fa fa-bars"></i>
        </button>
        <ul class="dropdown-menu" role="menu">
            <li><a href="/"><i class="fa fa-home"></i>Home</a></li>
            <li><a href="/categories.html"><i class="fa fa-folder"></i>Categories</a></li>
            <li><a href="/tags.html"><i class="fa fa-tags"></i>Tags</a></li>
            <li class="divider"></li>
            <li><a href="#"><i class="fa fa-arrow-up"></i>Top of Page</a></li>
        </ul>
    </div>

    <div class="col-sm-4 sidebar hidden-xs hidden-sm not-mobile">
        <!-- sidebar.html -->
<header class="sidebar-header" role="banner">
	<h1 class="text-center">John Papa</h1>
	<a href="/">
		<img src="http://www.gravatar.com/avatar/0d3794fe37746ea54926ca6878712721?s=150" class="img-circle" />
	</a>
	<h3 class="title">
		<a href="/"></a>
	</h3>
</header>


<div id="bio" class="text-center">
	Evangelist on the Loose
</div>


<div id="contact-list" class="text-center">
	<ul class="list-unstyled list-inline">
		
		<li>
			<a class="btn btn-default btn-sm" href="https://github.com/johnpapa">
				<i class="fa fa-github-alt fa-lg"></i>
			</a>
		</li>
		 
		<li>
			<a class="btn btn-default btn-sm" href="https://twitter.com/john_papa">
				<i class="fa fa-twitter fa-lg"></i>
			</a>
		</li>
		<li>
			<a class="btn btn-default btn-sm" href="/feed.xml">
				<i class="fa fa-rss fa-lg"></i>
			</a>
		</li>
	</ul>
	<ul id="contact-list-secondary" class="list-unstyled list-inline">
		 
	</ul>

	<div class="sidebar-content">

		<nav id="page-nav">
			<ul class="main-navigation list-unstyled list-inline">
				<li><a href="/about/">About</a></li>
				<li><a href="/articles">Articles</a></li>
				<li><a href="/spa">SPA</a></li>
				<li><a href="/videos">Videos</a></li>
			</ul>
		</nav>

		<h5>Recent Posts</h5>
		<ul class="list-unstyled">
			
				<li>
					<span>16 Sep 2015</span> &raquo;
					<a href="/angular/angular2/community/event/javascript/uncategorized/2015/09/16/angular-2-hack-night-coming-to-orlando.html">
					Angular 2 Hack Night Coming to Orlando</a>
				</li>
			
				<li>
					<span>29 Aug 2015</span> &raquo;
					<a href="/angular/asp.net/github/gulp/html5/javascript/pluralsight/typescript/uncategorized/visual%20studio%20code/2015/08/29/learning-visual-studio-code.html">
					Learning Visual Studio Code</a>
				</li>
			
				<li>
					<span>23 May 2015</span> &raquo;
					<a href="/uncategorized/2015/05/23/visual-studio-code-webinar.html">
					Visual Studio Code Webinar</a>
				</li>
			
				<li>
					<span>23 May 2015</span> &raquo;
					<a href="/uncategorized/2015/05/23/automatically-restarting-asp-net-on-osx-with-dnxmon.html">
					Automatically Restarting ASP.NET on OSX with DNXMON</a>
				</li>
			
				<li>
					<span>23 May 2015</span> &raquo;
					<a href="/uncategorized/2015/05/23/getting-started-with-asp-net-5-on-osx.html">
					Getting Started with ASP.NET 5 on OSX</a>
				</li>
			
				<li>
					<span>29 Apr 2015</span> &raquo;
					<a href="/uncategorized/2015/04/29/refactoring-with-visual-studio-code.html">
					Refactoring with Visual Studio Code</a>
				</li>
			
				<li>
					<span>29 Apr 2015</span> &raquo;
					<a href="/uncategorized/2015/04/29/intellisense-witha-visual-studio-code.html">
					Intellisense with Visual Studio Code</a>
				</li>
			
				<li>
					<span>29 Apr 2015</span> &raquo;
					<a href="/uncategorized/2015/04/29/git-and-preferences-in-visual-studio-code.html">
					Git and Preferences in Visual Studio Code</a>
				</li>
			
				<li>
					<span>29 Apr 2015</span> &raquo;
					<a href="/uncategorized/2015/04/29/debugging-with-visual-studio-code.html">
					Debugging with Visual Studio Code</a>
				</li>
			
				<li>
					<span>29 Apr 2015</span> &raquo;
					<a href="/uncategorized/2015/04/29/visual-studio-code.html">
					Introducing Visual Studio Code</a>
				</li>
			
		</ul>
	</div>

</div>
<!-- sidebar.html end -->
        <div class="not-mobile row sidebar-extras">
            <table class="col-centered">
                <tbody>
                    <tr>
                        <td>
                            <div data-type="ad" data-publisher="lqm.johnpapa.site" data-zone="ron" data-format="160x600"></div>
                        </td>
                        <td>
                            <div data-type="ad" data-publisher="lqm.johnpapa.site" data-zone="ron" data-format="160x600"></div>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <div data-type="ad" data-publisher="lqm.johnpapa.site" data-zone="ron" data-format="300x250"></div>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <div data-type="ad" data-publisher="lqm.johnpapa.site" data-zone="ron" data-format="300x250"></div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="col-sm-8">
        <div class="page-header">
  <h1>Build Single Page Apps - Part 7 - MVVM and KnockoutJS </h1>
</div>
	
<article>

	<div class="col-sm-10">
	 <span class="post-date">
	   
	   August 
	   23rd,
	     
	   2012
	 </span>
	  <div class="article_body">
	  <p>You knew it was coming, and you were right. MVVM and <a href="http://knockoutjs.com">Knockout</a> are 2 passions of mine and of course they are a big part of my upcoming <a href="http://www.pluralsight.com/">Pluralsight</a> course titled “Building Single Page Apps (SPA) with HTML5, ASP.NET Web API, Knockout and jQuery”. It’s less than 2 weeks to go before it’s due to go live!</p>

<p>You can catch up on the previous posts in this series here:</p>
<h3>More on the Code Camper SPA</h3>
<p>Part 1 - <a href="http://jpapa.me/spapost1">The Story Begins (What is the Code Camper SPA?)</a></p>

<p>Part 2 - <a href="http://jpapa.me/spapost2">Client Technologies</a></p>

<p>Part 3 - <a href="/spapost3">Server Technologies (the Data Layer)</a></p>

<p>Part 4 - <a href="http://jpapa.me/spapost4">Serving JSON with ASP.NET Web API</a></p>

<p>Part 5 - <a href="http://jpapa.me/spapost5">HTML 5 and ASP.NET Web Optimization</a></p>

<p>Part 6 - <a href="http://jpapa.me/spapost6">JavaScript Modules</a></p>

<p>Part 7 - <a href="http://jpapa.me/spapost7">MVVM and KnockoutJS</a></p>

<p>Part 8 - <a href="http://jpapa.me/spapost8">Data Services on the Client</a></p>

<p>Part 9 - <a href="http://jpapa.me/spapost9">Navigation, Transitions, Storage and Messaging</a></p>

<p>Part 10 - Saving, Change Tracking, and Commanding</p>

<p>Part 11 - Responsive Design and Mobility</p>

<p> </p>
<h3>MVVM</h3>
<p>I’ve talked and written a lot about Model View ViewModel (MVVM) in the past, and if you aren’t familiar with MVVM you can catch up with a <a href="http://visualstudiomagazine.com/articles/2011/08/15/fundamental-mvvm.aspx">MVVM primer from this article</a>. Are you back yet? Great. The good news for anyone who has done MVVM, MVP or MVC patterns (also known as the MV* patterns) is that you can follow this same pattern with JavaScript and SPA’s. In fact, its growing in popularity. KnockoutJS is a great library that handles data binding and integrates well with MVVM pattern. Together, they make a great pair. Let me explain a bit.</p>

<p>The HTML is our View and the data, which is very likely JSON, are our Model(s). So that covers the MV* part of MVVM. The way these fit together is important. We are apt to reuse Models in multiple Views, so it makes no sense to write redundant code with the copy/paste pattern when we need Person Model information in 4 or 5 Views. And how often is the data that comes from the web services and AJAX calls exactly what a View needs? Most of the time we need to tweak that data, adding new fields here, calculating other ones there, or cherry picking data form multiple Models for a View. This is where it is convenient to create an object that manages the View’s data … the View’s Models … the ViewModel.</p>

<p>The ViewModel can expose model data for the View to consume (via bindings and KnockoutJs). it’s not something that is specific for XAML … it works anywhere we have this separation of concerns.</p>

<p>The screenshot below shows the various types of data that the Code Camper SPA’s Favorites View needs. The data comes from various sources of models including Sessions (standard data), a list of dates of the events (lookup data), and filters. The first 2 come from web services while the latter (the filters) are completely driven by the View’s needs. All of these are aggregated together in a ViewModel.</p>

<p><a href="/wp-content/uploads/media/Windows-Live-Writer/7323e2fa09cf_145CD/image_5.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: block; margin-left: auto; margin-right: auto; padding-top: 0px; border: 0px;" title="image" src="/wp-content/uploads/media/Windows-Live-Writer/7323e2fa09cf_145CD/image_thumb_1.png" alt="image" width="616" height="463" border="0" /></a></p>
<h3><a href="http://knockoutjs.com">KnockoutJS</a></h3>
<p>We can certainly write jQuery to push the data into the HTML elements, and then pull them back out. That’s a lot of code that we don’t need to write though.  Knockout gives us data binding for that. KnockoutJS is a robust JavaScript data binding library that provides “observable” members which support two way bindings. I don’t cover Knockout in depth in the SPA course, but if you want in depth coverage of KnockoutJS you can catch <a href="http://jpapa.me/komvvm">my Pluralsight course on MVVM and Knockout here</a>.</p>

<p><a href="http://jpapa.me/komvvm"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: block; margin-left: auto; margin-right: auto; padding-top: 0px; border: 0px;" title="image" src="/wp-content/uploads/media/Windows-Live-Writer/7323e2fa09cf_145CD/image_3.png" alt="image" width="616" height="123" border="0" /></a></p>
<h3>ViewModel Example</h3>
<p>OK, I’ll give in … here is a quick example of a simple ViewModel. I shortened the contents of the functions because they are irrelevant really. The key here is that the list of publicly exposed members is at the bottom.</p>
<pre class="csharpcode">define(<span class="str">'vm.speaker'</span>,
[<span class="str">'ko'</span>, <span class="str">'datacontext'</span>, <span class="str">'config'</span>, <span class="str">'router'</span>, <span class="str">'messenger'</span>],
<span class="kwrd">function</span> (ko, datacontext, config, router, messenger) {
<span class="kwrd">var</span>
<span class="rem">// Properties</span>
currentSpeakerId = ko.observable(),
logger = config.logger,
speaker = ko.observable(),
speakerSessions = ko.observableArray(),
validationErrors = ko.observableArray(),
<span class="rem">// Knockout Computeds</span>
canEdit = ko.computed(<span class="kwrd">function</span> () {   .......   }),
isDirty = ko.computed(<span class="kwrd">function</span> () {   .......  }),
isValid = ko.computed(<span class="kwrd">function</span> () {   .......  }),
<span class="rem">// Methods</span>
activate = <span class="kwrd">function</span> (routeData, callback) {   .......  },
cancelCmd = ko.asyncCommand({
execute: <span class="kwrd">function</span>(complete) {   .......  },
canExecute: <span class="kwrd">function</span>(isExecuting) {   .......  }
}),
canLeave = <span class="kwrd">function</span> () {   .......  },
getSpeaker = <span class="kwrd">function</span> (completeCallback, forceRefresh) {   .......  },
goBackCmd = ko.asyncCommand({
execute: <span class="kwrd">function</span>(complete) {   .......  },
canExecute: <span class="kwrd">function</span>(isExecuting) {   .......  }
}),
saveCmd = ko.asyncCommand({
execute: <span class="kwrd">function</span>(complete) {   .......  },
canExecute: <span class="kwrd">function</span>(isExecuting) {   .......  }
}),
tmplName = <span class="kwrd">function</span> () {   .......  };
<span class="kwrd">return</span> {
activate: activate,
cancelCmd: cancelCmd,
canEdit: canEdit,
canLeave: canLeave,
goBackCmd: goBackCmd,
isDirty: isDirty,
isValid: isValid,
saveCmd: saveCmd,
speaker: speaker,
speakerSessions: speakerSessions,
tmplName: tmplName
};
});</pre>
<p>The ViewModel exposes the public members at the bottom, in the return object, and hides the rest. I’ll leave it here for now … there’s a lot of nice goodies in that code that may peak your interest. Next time, I’ll talk a bit more about how data flows throughout the client.</p>

	  </div>

		
		<ul class="tag_box list-unstyled list-inline">
		  <li><i class="fa fa-folder-open"></i></li>
		  
		  
			 
				<li><a href="/categories.html#javascript-ref">
					javascript <span>(69)</span>
					,
				</a></li>
			 
				<li><a href="/categories.html#knockout-ref">
					knockout <span>(26)</span>
					,
				</a></li>
			 
				<li><a href="/categories.html#mvvm-ref">
					mvvm <span>(19)</span>
					,
				</a></li>
			 
				<li><a href="/categories.html#pluralsight-ref">
					pluralsight <span>(49)</span>
					,
				</a></li>
			 
				<li><a href="/categories.html#spa-ref">
					spa <span>(37)</span>
					,
				</a></li>
			 
				<li><a href="/categories.html#uncategorized-ref">
					uncategorized <span>(150)</span>
					
				</a></li>
			
		  
		</ul>
		  

		  

		<hr>

		<div>
      <section class="share col-sm-6">
        <h4 class="section-title">Share Post</h4>
        <a class="btn btn-default btn-sm twitter" href="http://twitter.com/share?text=Build Single Page Apps - Part 7 - MVVM and KnockoutJS&via=john_papa"
           onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
          <i class="fa fa-twitter fa-lg"></i>
          Twitter
        </a>
        <a class="btn btn-default btn-sm facebook" href="https://www.facebook.com/sharer/sharer.php"
           onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
          <i class="fa fa-facebook fa-lg"></i>
          Facebook
        </a>
        <a class="btn btn-default btn-sm gplus"
           onclick="window.open('https://plus.google.com/share?url='+window.location.href, 'google-plus-share', 'width=490,height=530');return false;">
          <i class="fa fa-google-plus fa-lg"></i>
          Google+
        </a>
      </section>

      <section class="col-sm-6 author">
        <img src="http://www.gravatar.com/avatar/0d3794fe37746ea54926ca6878712721" class="img-rounded author-image" />
        <h4 class="section-title author-name">John Papa</h4>
        <p class="author-bio">Evangelist on the Loose</p>
      </section>
    </div>

    <div class="clearfix"></div>

		<ul class="pager">
		  
		  <li class="previous"><a href="/javascript/patterns/pluralsight/requirejs/spa/2012/08/17/spapost6.html" title="Build Single Page Apps - Part 6 - JavaScript Modules and Italian Food">&larr; Previous</a></li>
		  
		  
		  <li class="next"><a href="/pluralsight/2012/08/23/unique-pluralsight-video-call-me-maybe.html" title="Unique Pluralsight Video - Call Me Maybe">Next &rarr;</a></li>
		  
		</ul>

		<hr>
	</div>
	
	<div class="col-sm-2 sidebar-2">
	
	</div>
</article>
<div class="clearfix"></div>



    
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'johnpapa';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>





      <footer class="footer-text">
        <hr/>
        <p>
        Copyright © 2015 - John Papa Blog content licensed under the Creative Commons <a href="http://creativecommons.org/licenses/by/2.5/">CC BY 2.5</a>
        | Unless otherwise stated or granted, code samples licensed under the <a href="http://sm.mit-license.org/">MIT license</a>.
        | Site design based on the <a href="https://github.com/dbtek/dbyll">dbyll theme</a> under the <a href="http://sm.mit-license.org/">MIT license</a>
      </p>

      </footer>

    </div>

    <script type="text/javascript" src="/assets/resources/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="/assets/resources/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/assets/js/app.js"></script>

    <!--Developer Media Links-->
    <script type='text/javascript'>
        function _dmBootstrap(file) {
    var _dma = document.createElement('script'); _dma.type = 'text/javascript'; _dma.async = true; _dma.src = ('https:' == document.location.protocol ? 'https://' : 'http://')
    + file;
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(_dma);
    }
    function _dmFollowup(file) { if (typeof DMAds === 'undefined') _dmBootstrap('cdn2.DeveloperMedia.com/a.min.js');}
    (function () { _dmBootstrap('cdn1.DeveloperMedia.com/a.min.js');
    setTimeout(_dmFollowup, 2000);})();
    </script>

    <!--<script language="JavaScript" src="http://ad.doubleclick.net/N6839/adj/lqm.johnpapa.site/ron;kw=%2Cjohn%2Cpapa%2Cblog%2Cjohnpapa%7Bdot%7Dnet%2Cjohnpapa%2Cpappa%2Cwww%7Bdot%7Djohnpapa%7Bdot%7Dnet%2Cjon%2Cangular%2Cjhon;sz=160x600;dc_ref=http%3A%2F%2Fwww.johnpapa.net%2F;tile=1;ord=BEAAB484DA88D8D84B9DCB004E5712BE?"
    type="text/javascript"></script>-->

    <div data-type="ad" data-publisher="lqm.johnpapa.site" data-zone="ron" data-format="728x90" class="col-centered"></div>

</body>

</html>


<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl =
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'johnpapa']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

