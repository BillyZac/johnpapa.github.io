---
layout: post
title: TextBox is Not Behaving in Silverlight 2 Beta 2!
date: 2008-06-18 13:50
author: John
comments: true
categories: [All]
---
<p></p>  <p>I’m putting together some samples for an article for my <a href="http://msdn2.microsoft.com/en-us/magazine/cc159469.aspx">Data Points column</a> in MSDN Magazine on writing a line of business application with Silverlight communicating with WCF, and I ran into a few issues I did not expect. The one that really confused me causes the TextBox controls in the Silverlight application to:</p>  <ul>   <ul>     <li>not show the cursor in the TextBox (although I can type)</li>      <li>not show the contents being selected in the TextBox</li>      <li>breaks the TwoWay binding mode</li>   </ul> </ul>  <p></p>  <p>I was living with the first 2 because I thought, eh, what the heck, its beta and I obviously hit some weird occurrence. But when the binding only worked one way from the source to the target TextBox controls, I knew I had a real problem. The TextBox controls when bound with Mode=TwoWay were not updating the source when I typed in the TextBox controls (and lost focus of course).</p>  <p>After a few posts in the <a href="http://silverlight.net/forums/p/18465/62155.aspx#62155">Silverlight forums</a> and some emails with some fellows at Microsoft, it was confirmed that there is a bug in the Silverlight 2 Beta 2 that causes the TextBox to not behave properly. The confusing aspect is trying to reproduce the problem. So I created a simple Silverlight user control, shown below:</p>  <div>   <div style="padding-right: 0px; padding-left: 0px; font-size: 8pt; padding-bottom: 0px; overflow: visible; width: 100%; color: black; border-top-style: none; line-height: 12pt; padding-top: 0px; font-family: consolas, &#39;Courier New&#39;, courier, monospace; border-right-style: none; border-left-style: none; background-color: #f4f4f4; border-bottom-style: none">     <pre style="padding-right: 0px; padding-left: 0px; font-size: 8pt; padding-bottom: 0px; margin: 0em; overflow: visible; width: 100%; color: black; border-top-style: none; line-height: 12pt; padding-top: 0px; font-family: consolas, &#39;Courier New&#39;, courier, monospace; border-right-style: none; border-left-style: none; background-color: white; border-bottom-style: none"><span style="color: #0000ff">&lt;</span><span style="color: #800000">UserControl</span> <span style="color: #ff0000">x:Class</span><span style="color: #0000ff">=&quot;TextBoxTester.Page&quot;</span></pre>
<pre style="padding-right: 0px; padding-left: 0px; font-size: 8pt; padding-bottom: 0px; margin: 0em; overflow: visible; width: 100%; color: black; border-top-style: none; line-height: 12pt; padding-top: 0px; font-family: consolas, &#39;Courier New&#39;, courier, monospace; border-right-style: none; border-left-style: none; background-color: #f4f4f4; border-bottom-style: none">    <span style="color: #ff0000">xmlns</span><span style="color: #0000ff">=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;</span> </pre>
<pre style="padding-right: 0px; padding-left: 0px; font-size: 8pt; padding-bottom: 0px; margin: 0em; overflow: visible; width: 100%; color: black; border-top-style: none; line-height: 12pt; padding-top: 0px; font-family: consolas, &#39;Courier New&#39;, courier, monospace; border-right-style: none; border-left-style: none; background-color: white; border-bottom-style: none">    <span style="color: #ff0000">xmlns:x</span><span style="color: #0000ff">=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;</span> </pre>
<pre style="padding-right: 0px; padding-left: 0px; font-size: 8pt; padding-bottom: 0px; margin: 0em; overflow: visible; width: 100%; color: black; border-top-style: none; line-height: 12pt; padding-top: 0px; font-family: consolas, &#39;Courier New&#39;, courier, monospace; border-right-style: none; border-left-style: none; background-color: #f4f4f4; border-bottom-style: none">    <span style="color: #ff0000">Width</span><span style="color: #0000ff">=&quot;400&quot;</span> <span style="color: #ff0000">Height</span><span style="color: #0000ff">=&quot;300&quot;</span><span style="color: #0000ff">&gt;</span></pre>
<pre style="padding-right: 0px; padding-left: 0px; font-size: 8pt; padding-bottom: 0px; margin: 0em; overflow: visible; width: 100%; color: black; border-top-style: none; line-height: 12pt; padding-top: 0px; font-family: consolas, &#39;Courier New&#39;, courier, monospace; border-right-style: none; border-left-style: none; background-color: white; border-bottom-style: none">    <span style="color: #0000ff">&lt;</span><span style="color: #800000">Grid</span> <span style="color: #ff0000">x:Name</span><span style="color: #0000ff">=&quot;LayoutRoot&quot;</span> <span style="color: #ff0000">Background</span><span style="color: #0000ff">=&quot;White&quot;</span><span style="color: #0000ff">&gt;</span></pre>
<pre style="padding-right: 0px; padding-left: 0px; font-size: 8pt; padding-bottom: 0px; margin: 0em; overflow: visible; width: 100%; color: black; border-top-style: none; line-height: 12pt; padding-top: 0px; font-family: consolas, &#39;Courier New&#39;, courier, monospace; border-right-style: none; border-left-style: none; background-color: #f4f4f4; border-bottom-style: none">        <span style="color: #0000ff">&lt;</span><span style="color: #800000">TextBox</span> <span style="color: #ff0000">x:Name</span><span style="color: #0000ff">=&quot;tbMsg&quot;</span> <span style="color: #ff0000">Text</span><span style="color: #0000ff">=&quot;Hello World&quot;</span> <span style="color: #ff0000">Height</span><span style="color: #0000ff">=&quot;30&quot;</span> <span style="color: #ff0000">Width</span><span style="color: #0000ff">=&quot;Auto&quot;</span><span style="color: #0000ff">&gt;&lt;/</span><span style="color: #800000">TextBox</span><span style="color: #0000ff">&gt;</span></pre>
<pre style="padding-right: 0px; padding-left: 0px; font-size: 8pt; padding-bottom: 0px; margin: 0em; overflow: visible; width: 100%; color: black; border-top-style: none; line-height: 12pt; padding-top: 0px; font-family: consolas, &#39;Courier New&#39;, courier, monospace; border-right-style: none; border-left-style: none; background-color: white; border-bottom-style: none">    <span style="color: #0000ff">&lt;/</span><span style="color: #800000">Grid</span><span style="color: #0000ff">&gt;</span> </pre>
<pre style="padding-right: 0px; padding-left: 0px; font-size: 8pt; padding-bottom: 0px; margin: 0em; overflow: visible; width: 100%; color: black; border-top-style: none; line-height: 12pt; padding-top: 0px; font-family: consolas, &#39;Courier New&#39;, courier, monospace; border-right-style: none; border-left-style: none; background-color: #f4f4f4; border-bottom-style: none"><span style="color: #0000ff">&lt;/</span><span style="color: #800000">UserControl</span><span style="color: #0000ff">&gt;</span></pre>
</div>
</div>
<p>&#160;</p>
<p>When this control is run from Visual Studio, there is no problem … nor is there a problem if I browse to the html page that hosts the compiled Silverlight application. WTF, says I! But if I browse to the html page that hosts the app, then REFRESH the page in the browser forcing the Silverlight control to reload the TextBox starts behaving badly. I tried this several times and it always reproduced it. However there are people I gave this same code to who saw the same behavior and others who did not. So there is obviously some other force intervening in this that I am not aware of still.</p>
<p>There are no error messages, no informational messages, nothing at all except a misbehaving TextBox control.</p>
<p>Anyway, I have been told that there is a bug regarding the TextBox control and that it will be fixed in a future release (prior to RTM of course). The causing factors are not completely known to me, but in case you run across this I figured I would shed a little light on it. The way I get around it for now is to click in the address bar of the browser, then click back on the Silverlight control. This seems to put the TextBox’s world back in order.</p><div class="wlWriterHeaderFooter" style="text-align:left; margin:0px; padding:4px 4px 4px 4px;"><a href="http://www.dotnetkicks.com/kick/?url=/all/textbox-is-not-behaving-in-silverlight-2-beta-2/"><img src="http://www.dotnetkicks.com/Services/Images/KickItImageGenerator.ashx?url=/all/textbox-is-not-behaving-in-silverlight-2-beta-2/&amp;bgcolor=0080C0&amp;fgcolor=FFFFFF&amp;border=000000&amp;cbgcolor=D4E1ED&amp;cfgcolor=000000" border="0/"></a></div><div class="wlWriterHeaderFooter" style="text-align:left; margin:0px; padding:4px 4px 4px 4px;"><script type="text/javascript">var dzone_url = '/all/textbox-is-not-behaving-in-silverlight-2-beta-2/';</script><script type="text/javascript">var dzone_title = 'TextBox is Not Behaving in Silverlight 2 Beta 2!';</script><script type="text/javascript">var dzone_blurb = 'TextBox is Not Behaving in Silverlight 2 Beta 2!';</script><script type="text/javascript">var dzone_style = '1';</script><script language="javascript" src="http://widgets.dzone.com/widgets/zoneit.js"></script> </div>

